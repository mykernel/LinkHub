@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* 定义主题过渡动画 */
  :root {
    --theme-transition: background-color 280ms ease-out,
                       color 280ms ease-out,
                       border-color 280ms ease-out,
                       box-shadow 280ms ease-out,
                       backdrop-filter 280ms ease-out;
  }

  /* 亮色模式 */
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    /* 表面分层 */
    --surface: 0 0% 98%;
    --surface-elevated: 0 0% 96%;
    --surface-highlight: 210 40% 94%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96%;
    --secondary-foreground: 222.2 84% 4.9%;

    --muted: 210 40% 96%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 221.2 83.2% 53.3%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221.2 83.2% 53.3%;

    --radius: 0.5rem;
  }

  /* 优化的暗色模式 - 分层设计，避免纯黑 */
  .dark {
    /* 背景分层：从深蓝灰到较亮的表面 */
    --background: 222.2 84% 4.9%;        /* #0F172A - 主背景 */
    --surface: 220 26% 14%;              /* #1E293B - 导航栏/侧栏 */
    --surface-elevated: 215 28% 17%;     /* #2D3748 - 卡片容器 */
    --surface-highlight: 215 25% 21%;    /* #374151 - 高亮表面 */

    /* 文本分层 - 确保足够的对比度 */
    --foreground: 210 40% 98%;           /* #F8FAFC - 主文本 */
    --foreground-muted: 215 20% 82%;     /* #CBD5E1 - 次要文本 */
    --foreground-subtle: 215 16% 65%;    /* #94A3B8 - 辅助文本 */

    --card: 220 26% 14%;
    --card-foreground: 210 40% 98%;
    --popover: 215 28% 17%;
    --popover-foreground: 210 40% 98%;

    /* 主色调 - 柔和的蓝色 */
    --primary: 217.2 91.2% 59.8%;        /* #60A5FA */
    --primary-foreground: 222.2 84% 4.9%;

    /* 次要色调 */
    --secondary: 215 28% 17%;
    --secondary-foreground: 210 40% 98%;

    /* 静音色调 */
    --muted: 215 16% 47%;                /* rgba(148,163,184,0.12) */
    --muted-foreground: 215 20% 65%;

    /* 强调色 */
    --accent: 217.2 91.2% 59.8%;
    --accent-foreground: 222.2 84% 4.9%;

    /* 警告和错误色 - 降低饱和度 */
    --destructive: 0 72% 51%;            /* #EF4444 */
    --destructive-foreground: 210 40% 98%;

    /* 边框和输入框 - 半透明效果 */
    --border: 215 16% 36%;               /* rgba(148,163,184,0.35) */
    --input: 215 28% 17%;
    --ring: 217.2 91.2% 59.8%;
  }
}

@layer base {
  /* 为所有元素添加主题过渡，除非明确排除 */
  *:where(:not(.no-theme-transition)) {
    transition: var(--theme-transition);
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    /* 确保body也有过渡动画 */
    transition: var(--theme-transition);
  }

  /* 优化滚动条在暗色模式下的显示 */
  ::-webkit-scrollbar {
    width: 6px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-muted-foreground/20 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-muted-foreground/30;
  }

  /* 暗色模式下的特殊优化 */
  .dark ::-webkit-scrollbar-thumb {
    background: rgba(148, 163, 184, 0.3);
  }

  .dark ::-webkit-scrollbar-thumb:hover {
    background: rgba(148, 163, 184, 0.5);
  }
}