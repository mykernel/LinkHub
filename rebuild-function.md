# LinkHub 功能深度拆分分析

## 用户角色与权限体系

### 普通用户
- 浏览权限：查看个人书签、分类及搜索结果
- 管理权限：增删改自己的书签与自定义分类
- 个人设置：更新密码、主题与显示偏好
- 数据权限：仅能访问本人数据与统计

### 管理员
- 用户管理：查看所有用户、启用或禁用账户、重置密码
- 系统配置：维护默认书签与默认分类
- 基础数据：查看核心指标（用户总量、书签数量等基础信息）
- 权限继承：拥有普通用户的全部功能

## 书签管理

### CRUD 操作流程

#### 创建书签
1. 点击“添加书签”按钮
2. 填写名称（必填）、URL（必填）、分类（必填）、描述与图标（可选）
3. 校验 URL 格式并自动补全协议
4. 持久化记录并写入创建时间
5. 刷新书签列表显示

#### 编辑书签
1. 选择书签并点击编辑
2. 表单预填现有数据，可修改所有字段
3. 校验更新内容
4. 保存修改并记录更新时间
5. 页面实时刷新

#### 删除书签
1. 点击删除触发确认弹窗
2. 确认后移除书签并更新统计
3. 刷新列表展示最新状态

### 交互能力

#### 访问书签
1. 点击书签卡片
2. 增加点击次数并更新最后访问时间
3. 在新标签页打开目标链接
4. 根据最新数据调整热门排序

#### 复制链接
1. 点击复制按钮
2. 调用剪贴板 API 写入 URL
3. 显示 2 秒“已复制”提示
4. 不影响其他统计字段

#### 收藏与固定
- 收藏：点击星形按钮切换 `isPinned` 状态，收藏项聚合在“收藏”分类并即时更新样式
- 固定：记录 `pinnedPosition` 以保持视图顺序稳定，其余书签围绕固定项重新排序

## 分类管理

### 系统预设分类（9 个）
- 全部：虚拟分类，显示所有书签
- 收藏：虚拟分类，展示收藏书签
- 社交媒体、新闻资讯、在线工具、娱乐影音、文档、学习教育、购物商城：对应默认业务分类

### 自定义分类流程

#### 创建
1. 点击“新建分类”
2. 填写名称（必填），选择图标与颜色（预设列表）
3. 保存后立即出现在分类导航

#### 修改
1. 进入分类编辑
2. 更新名称、图标或颜色
3. 校验是否存在关联书签
4. 保存并实时刷新相关展示

#### 删除
1. 选择删除分类
2. 检测分类下书签数量
3. 如存在书签，提示选择目标分类进行转移
4. 批量更新书签归属后删除分类

## 搜索与筛选

### 实时搜索
1. 输入关键词
2. 触发 300ms 防抖后执行查询
3. 在名称与描述字段中进行模糊匹配（不区分大小写）
4. 实时刷新结果列表
5. 清空输入恢复全部数据

### 分类筛选
1. 点击分类标签
2. 根据分类 ID 过滤书签
3. “全部”显示全部书签，“收藏”显示 `isPinned = true`
4. 其他标签显示对应分类
5. 支持与搜索组合

## 排序与分页

### 排序维度
- 按点击量：`clickCount` 降序
- 按名称：名称字母顺序
- 按创建时间：`createdAt` 倒序
- 按访问时间：`lastAccessed` 倒序

### 固定项处理
1. 提取带 `pinnedPosition` 的书签
2. 对其余数据按选定规则排序
3. 将固定书签插入指定位置
4. 输出最终顺序

### 分页逻辑
- 每页数量：12、24、48 条
- 页码从 1 开始，依据总数与每页数量计算总页数
- 切换搜索或筛选条件时重置到第 1 页
- 支持页码跳转及上一页/下一页导航
- 展示当前页与总页信息

## 视图模式

### 网格视图
- 卡片式布局，响应式适配多终端
- 展示图标、名称、描述与统计信息
- 提供访问、复制、收藏、固定、删除等操作入口

### 列表视图
- 垂直列表，高信息密度
- 适合快速浏览大量数据
- 保留与网格视图一致的操作能力

## 用户认证与会话管理

### 注册流程
1. 填写用户名与密码
2. 校验用户名唯一性
3. 对密码进行哈希处理
4. 生成用于数据加密的随机 Salt
5. 创建用户并写入默认配置
6. 自动登录跳转主界面

### 登录流程
1. 输入用户名与密码
2. 验证身份信息（仅支持账号密码，不提供第三方登录）
3. 生成 JWT 访问令牌
4. 建立加密会话用于数据解密
5. 加载用户数据与偏好
6. 进入个人书签管理页

### 会话管理
- 自动刷新访问令牌
- 加密密钥仅驻留内存
- 关闭浏览器时清理敏感缓存
- 支持“记住我”保持登录
- 异常或令牌失效时强制登出

## 数据同步与存储

### 未登录用户（访客模式）
- 数据仅保存在浏览器 `localStorage`
- 可浏览、搜索和访问书签
- 无新增、编辑、删除、收藏与分类管理能力
- 数据不跨设备同步

### 登录用户（云端同步）
- 使用 AES-256-GCM 加密后存储到服务端 MySQL
- 客户端 `localStorage` 作为缓存层提升体验
- 操作同时更新本地缓存与云端持久化
- 多设备实时同步，包含冲突检测与版本控制
- 提供离线可恢复的数据一致性保障
